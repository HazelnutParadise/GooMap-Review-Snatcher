import{x as ce,y as C,z as L,A as $,B as D,C as _e,D as de,F as ee,l as he,b as pe,m as E,G as me,I as re,a as ae,p as be,J as te,K as N,L as ge,M as H,N as ye,O as ke,P as Ee,Q as we,R as xe,S as Se,T as Ie,V as Te,W as qe,i as Me,w as le,X as ne,Y as V,Z as Ae,e as Ce,c as Le,f as W,d as M,g as De,t as G,j as A,k as T,h as X,_ as Oe,o as Ne,q as Y}from"./template-Ck2fRipi.js";import{s as Re}from"./render-B3o7HRdp.js";import{a as Be,i as Fe}from"./lifecycle-BJN0pLMS.js";import{i as Pe,p as x}from"./props-8vpwuoM1.js";import Ve from"../entries/InfoCard-Enpj5mUS.js";let F=!1,P=[];function Ge(){F=!1;const e=P.slice();P=[],ce(e)}function ie(e){F||(F=!0,queueMicrotask(Ge)),P.push(e)}let He=!1,z=!1;function We(){z||(z=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var r;if(!e.defaultPrevented)for(const a of e.target.elements)(r=a.__on_r)==null||r.call(a)})},{capture:!0}))}function se(e){var r=$,a=D;C(null),L(null);try{return e()}finally{C(r),L(a)}}function ue(e,r,a,n=a){e.addEventListener(r,()=>se(a));const l=e.__on_r;l?e.__on_r=()=>{l(),n(!0)}:e.__on_r=()=>n(!0),We()}function Xe(e,r,a,n={}){function l(t){if(n.capture||Ye.call(r,t),!t.cancelBubble)return se(()=>a==null?void 0:a.call(this,t))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?ie(()=>{r.addEventListener(e,l,n)}):r.addEventListener(e,l,n),l}function J(e,r,a,n,l){var t={capture:n,passive:l},f=Xe(e,r,a,t);(r===document.body||r===window||r===document)&&_e(()=>{r.removeEventListener(e,f,t)})}function Ye(e){var p;var r=this,a=r.ownerDocument,n=e.type,l=((p=e.composedPath)==null?void 0:p.call(e))||[],t=l[0]||e.target,f=0,c=e.__root;if(c){var _=l.indexOf(c);if(_!==-1&&(r===document||r===window)){e.__root=r;return}var d=l.indexOf(r);if(d===-1)return;_<=d&&(f=_)}if(t=l[f]||e.target,t!==r){de(e,"currentTarget",{configurable:!0,get(){return t||a}});var i=$,h=D;C(null),L(null);try{for(var s,v=[];t!==null;){var u=t.assignedSlot||t.parentNode||t.host||null;try{var m=t["__"+n];if(m!==void 0&&!t.disabled)if(ee(m)){var[g,...o]=m;g.apply(t,[e,...o])}else m.call(t,e)}catch(b){s?v.push(b):s=b}if(e.cancelBubble||u===r||u===null)break;t=u}if(s){for(let b of v)queueMicrotask(()=>{throw b});throw s}}finally{e.__root=r,delete e.currentTarget,C(i),L(h)}}}function ze(e,r){return r}function Je(e,r,a,n){for(var l=[],t=r.length,f=0;f<t;f++)ke(r[f].e,l,!0);var c=t>0&&l.length===0&&a!==null;if(c){var _=a.parentNode;Ee(_),_.append(a),n.clear(),w(e,r[0].prev,r[t-1].next)}we(l,()=>{for(var d=0;d<t;d++){var i=r[d];c||(n.delete(i.k),w(e,i.prev,i.next)),xe(i.e,!c)}})}function Ke(e,r,a,n,l,t=null){var f=e,c={items:new Map,first:null};{var _=e;f=_.appendChild(he())}var d=null,i=!1,h=me(()=>{var s=a();return ee(s)?s:s==null?[]:te(s)});pe(()=>{var s=E(h),v=s.length;i&&v===0||(i=v===0,Qe(s,c,f,l,r,n,a),t!==null&&(v===0?d?re(d):d=ae(()=>t(f)):d!==null&&be(d,()=>{d=null})),E(h))})}function Qe(e,r,a,n,l,t,f){var c=e.length,_=r.items,d=r.first,i=d,h,s=null,v=[],u=[],m,g,o,p;for(p=0;p<c;p+=1){if(m=e[p],g=t(m,p),o=_.get(g),o===void 0){var b=i?i.e.nodes_start:a;s=Ze(b,r,s,s===null?r.first:s.next,m,g,p,n,l,f),_.set(g,s),v=[],u=[],i=s.next;continue}if(Ue(o,m,p),o.e.f&N&&re(o.e),o!==i){if(h!==void 0&&h.has(o)){if(v.length<u.length){var k=u[0],y;s=k.prev;var S=v[0],I=v[v.length-1];for(y=0;y<v.length;y+=1)K(v[y],k,a);for(y=0;y<u.length;y+=1)h.delete(u[y]);w(r,S.prev,I.next),w(r,s,S),w(r,I,k),i=k,s=I,p-=1,v=[],u=[]}else h.delete(o),K(o,i,a),w(r,o.prev,o.next),w(r,o,s===null?r.first:s.next),w(r,s,o),s=o;continue}for(v=[],u=[];i!==null&&i.k!==g;)i.e.f&N||(h??(h=new Set)).add(i),u.push(i),i=i.next;if(i===null)continue;o=i}v.push(o),s=o,i=o.next}if(i!==null||h!==void 0){for(var O=h===void 0?[]:te(h);i!==null;)i.e.f&N||O.push(i),i=i.next;var ve=O.length;if(ve>0){var oe=c===0?a:null;Je(r,O,oe,_)}}D.first=r.first&&r.first.e,D.last=s&&s.e}function Ue(e,r,a,n){ye(e.v,r),e.i=a}function Ze(e,r,a,n,l,t,f,c,_,d){var i=(_&Ie)!==0,h=(_&Te)===0,s=i?h?ge(l):H(l):l,v=_&Se?H(f):f,u={i:v,v:s,k:t,a:null,e:null,prev:a,next:n};try{return u.e=ae(()=>c(e,s,v,d),He),u.e.prev=a&&a.e,u.e.next=n&&n.e,a===null?r.first=u:(a.next=u,a.e.next=u.e),n!==null&&(n.prev=u,n.e.prev=u.e),u}finally{}}function K(e,r,a){for(var n=e.next?e.next.e.nodes_start:a,l=r?r.e.nodes_start:a,t=e.e.nodes_start;t!==n;){var f=qe(t);l.before(t),t=f}}function w(e,r,a){r===null?e.first=a:(r.next=a,r.e.next=a&&a.e),a!==null&&(a.prev=r,a.e.prev=r&&r.e)}function Q(e,r,a=r){var n=Me();ue(e,"input",l=>{var t=l?e.defaultValue:e.value;if(t=R(e)?B(t):t,a(t),n&&t!==(t=r())){var f=e.selectionStart,c=e.selectionEnd;e.value=t??"",c!==null&&(e.selectionStart=f,e.selectionEnd=Math.min(c,e.value.length))}}),le(r)==null&&e.value&&a(R(e)?B(e.value):e.value),ne(()=>{var l=r();R(e)&&l===B(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function R(e){var r=e.type;return r==="number"||r==="range"}function B(e){return e===""?null:+e}function fe(e,r,a){if(e.multiple)return er(e,r);for(var n of e.options){var l=q(n);if(Pe(l,r)){n.selected=!0;return}}(!a||r!==void 0)&&(e.selectedIndex=-1)}function je(e,r){V(()=>{var a=new MutationObserver(()=>{var n=e.__value;fe(e,n)});return a.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{a.disconnect()}})}function $e(e,r,a=r){var n=!0;ue(e,"change",l=>{var t=l?"[selected]":":checked",f;if(e.multiple)f=[].map.call(e.querySelectorAll(t),q);else{var c=e.querySelector(t)??e.querySelector("option:not([disabled])");f=c&&q(c)}a(f)}),V(()=>{var l=r();if(fe(e,l,n),n&&l===void 0){var t=e.querySelector(":checked");t!==null&&(l=q(t),a(l))}e.__value=l,n=!1}),je(e)}function er(e,r){for(var a of e.options)a.selected=~r.indexOf(q(a))}function q(e){return"__value"in e?e.__value:e.value}function U(e,r){return e===r||(e==null?void 0:e[Ae])===r}function Z(e={},r,a,n){return V(()=>{var l,t;return ne(()=>{l=t,t=[],le(()=>{e!==a(...t)&&(r(e,...t),l&&U(a(...l),e)&&r(null,...l))})}),()=>{ie(()=>{t&&U(a(...t),e)&&r(null,...t)})}}),e}function j(e){return function(...r){var a=r[0];return a.preventDefault(),e==null?void 0:e.apply(this,r)}}var rr=G("<option> </option>"),ar=G('<form class="input-form chose-store svelte-e5nmlf"><div class="store-select-box svelte-e5nmlf"><label for="store" class="svelte-e5nmlf">選擇店家</label> <select class="store-select svelte-e5nmlf"></select></div> <div class="pages-box svelte-e5nmlf"><label for="pages" class="svelte-e5nmlf">輸入頁數，0代表全部</label> <input type="number" name="pages" placeholder="輸入頁數" class="svelte-e5nmlf"></div> <button type="submit" class="button svelte-e5nmlf">確定</button></form>'),tr=G('<!> <form class="input-form svelte-e5nmlf"><input type="text" placeholder="輸入關鍵字" class="svelte-e5nmlf"> <button type="submit" class="button svelte-e5nmlf">搜尋</button></form>',1);function fr(e,r){Ce(r,!1);let a=x(r,"searchInputStr",12),n=x(r,"selectedStore",12),l=x(r,"pagesToFetch",12),t=x(r,"handleSearch",8),f=x(r,"handleGetReview",8),c=x(r,"storeData",24,()=>[]),_=Ne(null);Be();var d=Le(),i=W(d);{var h=v=>{var u=ar(),m=T(u),g=A(T(m),2);X(()=>{n(),Oe(()=>{c()})}),Ke(g,5,c,ze,(b,k)=>{var y=rr(),S={},I=T(y);X(()=>{S!==(S=E(k))&&(y.value=(y.__value=E(k))==null?"":E(k)),Re(I,E(k).Name)}),M(b,y)});var o=A(m,2),p=A(T(o),2);Z(u,b=>Y(_,b),()=>E(_)),$e(g,n),Q(p,l),J("submit",u,j(function(...b){var k;(k=f())==null||k.apply(this,b)})),M(v,u)},s=v=>{var u=tr(),m=W(u);Ve(m);var g=A(m,2),o=T(g);Z(g,p=>Y(_,p),()=>E(_)),Q(o,a),J("submit",g,j(function(...p){var b;(b=t())==null||b.apply(this,p)})),M(v,u)};Fe(i,v=>{Object.keys(c()).length!==0?v(h):v(s,!1)})}M(e,d),De()}export{fr as I,J as a,Ke as e,ze as i};
