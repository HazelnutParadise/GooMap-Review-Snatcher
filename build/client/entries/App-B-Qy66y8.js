import{S as pe,i as be,s as ge,d as v,t as P,b as Q,r as z,e as me,h as R,u as b,D as ke,v as S,E as K,F as we,z as U,w as T,x as O,y as J,G as Y,C as F,A as j,B as x,q as Te,o as te,a as fe,m as de,j as _e,f as ve,H as W,I as X,J as Z,K as le,L as je,M as $,g as Ee}from"../chunks/index-GWTj1K6P.js";import{I as Se,e as A}from"../chunks/InputCard-DKWCWenZ.js";import qe from"./Loader-D84Q-Lp6.js";import"./InfoCard-Dh1rx6av.js";const ye=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,{document:ee}=ye;function re(a,e,s){const l=a.slice();return l[17]=e[s],l}function ae(a,e,s){const l=a.slice();return l[20]=e[s],l}function ce(a,e,s){const l=a.slice();return l[23]=e[s],l}function Oe(a){let e,s="查詢其他商家",l,t,n,d=a[3].Name+"",i,w,p,h="下載 CSV",E,m,G="下載 JSON",H,k,g,D,q,M,u,C,y,N=A(Object.keys(a[6][0])),_=[];for(let o=0;o<N.length;o+=1)_[o]=ie(ce(a,N,o));let L=A(a[6]),r=[];for(let o=0;o<L.length;o+=1)r[o]=he(re(a,L,o));return{c(){e=j("button"),e.textContent=s,l=F(),t=j("div"),n=j("h3"),i=x(d),w=F(),p=j("button"),p.textContent=h,E=F(),m=j("button"),m.textContent=G,H=F(),k=j("div"),g=j("table"),D=j("thead"),q=j("tr");for(let o=0;o<_.length;o+=1)_[o].c();M=F(),u=j("tbody");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=T(o,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-gc4oaf"&&(e.textContent=s),l=U(o),t=T(o,"DIV",{class:!0});var f=O(t);n=T(f,"H3",{class:!0});var c=O(n);i=J(c,d),c.forEach(v),w=U(f),p=T(f,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(p)!=="svelte-1cm302j"&&(p.textContent=h),E=U(f),m=T(f,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(m)!=="svelte-zkdu87"&&(m.textContent=G),H=U(f),k=T(f,"DIV",{class:!0});var B=O(k);g=T(B,"TABLE",{class:!0});var I=O(g);D=T(I,"THEAD",{});var se=O(D);q=T(se,"TR",{class:!0});var ne=O(q);for(let V=0;V<_.length;V+=1)_[V].l(ne);ne.forEach(v),se.forEach(v),M=U(I),u=T(I,"TBODY",{});var oe=O(u);for(let V=0;V<r.length;V+=1)r[V].l(oe);oe.forEach(v),I.forEach(v),B.forEach(v),f.forEach(v),this.h()},h(){S(e,"class","reset-button button svelte-vqnkcd"),S(n,"class","store-name svelte-vqnkcd"),S(p,"class","download-button button svelte-vqnkcd"),S(m,"class","download-button button svelte-vqnkcd"),S(q,"class","svelte-vqnkcd"),S(g,"class","review-table svelte-vqnkcd"),S(k,"class","review-table-box svelte-vqnkcd"),S(t,"class","review-box svelte-vqnkcd")},m(o,f){R(o,e,f),R(o,l,f),R(o,t,f),b(t,n),b(n,i),b(t,w),b(t,p),b(t,E),b(t,m),b(t,H),b(t,k),b(k,g),b(g,D),b(D,q);for(let c=0;c<_.length;c+=1)_[c]&&_[c].m(q,null);b(g,M),b(g,u);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(u,null);C||(y=[$(e,"click",a[14]),$(p,"click",a[15]),$(m,"click",a[16])],C=!0)},p(o,f){if(f&8&&d!==(d=o[3].Name+"")&&z(i,d),f&64){N=A(Object.keys(o[6][0]));let c;for(c=0;c<N.length;c+=1){const B=ce(o,N,c);_[c]?_[c].p(B,f):(_[c]=ie(B),_[c].c(),_[c].m(q,null))}for(;c<_.length;c+=1)_[c].d(1);_.length=N.length}if(f&64){L=A(o[6]);let c;for(c=0;c<L.length;c+=1){const B=re(o,L,c);r[c]?r[c].p(B,f):(r[c]=he(B),r[c].c(),r[c].m(u,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=L.length}},i:te,o:te,d(o){o&&(v(e),v(l),v(t)),le(_,o),le(r,o),C=!1,je(y)}}}function Ie(a){let e,s,l,t,n;function d(h){a[11](h)}function i(h){a[12](h)}function w(h){a[13](h)}let p={handleSearch:a[8],handleGetReview:a[9],storeData:a[5]};return a[4]!==void 0&&(p.pagesToFetch=a[4]),a[2]!==void 0&&(p.searchInputStr=a[2]),a[3]!==void 0&&(p.selectedStore=a[3]),e=new Se({props:p}),W.push(()=>X(e,"pagesToFetch",d)),W.push(()=>X(e,"searchInputStr",i)),W.push(()=>X(e,"selectedStore",w)),{c(){ve(e.$$.fragment)},l(h){_e(e.$$.fragment,h)},m(h,E){de(e,h,E),n=!0},p(h,E){const m={};E&32&&(m.storeData=h[5]),!s&&E&16&&(s=!0,m.pagesToFetch=h[4],Z(()=>s=!1)),!l&&E&4&&(l=!0,m.searchInputStr=h[2],Z(()=>l=!1)),!t&&E&8&&(t=!0,m.selectedStore=h[3],Z(()=>t=!1)),e.$set(m)},i(h){n||(Q(e.$$.fragment,h),n=!0)},o(h){P(e.$$.fragment,h),n=!1},d(h){fe(e,h)}}}function Ce(a){let e,s;return e=new qe({}),{c(){ve(e.$$.fragment)},l(l){_e(e.$$.fragment,l)},m(l,t){de(e,l,t),s=!0},p:te,i(l){s||(Q(e.$$.fragment,l),s=!0)},o(l){P(e.$$.fragment,l),s=!1},d(l){fe(e,l)}}}function ie(a){let e,s=a[23]+"",l;return{c(){e=j("th"),l=x(s),this.h()},l(t){e=T(t,"TH",{class:!0});var n=O(e);l=J(n,s),n.forEach(v),this.h()},h(){S(e,"class","svelte-vqnkcd")},m(t,n){R(t,e,n),b(e,l)},p(t,n){n&64&&s!==(s=t[23]+"")&&z(l,s)},d(t){t&&v(e)}}}function ue(a){let e,s=a[20]+"",l;return{c(){e=j("td"),l=x(s),this.h()},l(t){e=T(t,"TD",{class:!0});var n=O(e);l=J(n,s),n.forEach(v),this.h()},h(){S(e,"class","svelte-vqnkcd")},m(t,n){R(t,e,n),b(e,l)},p(t,n){n&64&&s!==(s=t[20]+"")&&z(l,s)},d(t){t&&v(e)}}}function he(a){let e,s,l=A(Object.values(a[17])),t=[];for(let n=0;n<l.length;n+=1)t[n]=ue(ae(a,l,n));return{c(){e=j("tr");for(let n=0;n<t.length;n+=1)t[n].c();s=F(),this.h()},l(n){e=T(n,"TR",{class:!0});var d=O(e);for(let i=0;i<t.length;i+=1)t[i].l(d);s=U(d),d.forEach(v),this.h()},h(){S(e,"class","svelte-vqnkcd")},m(n,d){R(n,e,d);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(e,null);b(e,s)},p(n,d){if(d&64){l=A(Object.values(n[17]));let i;for(i=0;i<l.length;i+=1){const w=ae(n,l,i);t[i]?t[i].p(w,d):(t[i]=ue(w),t[i].c(),t[i].m(e,s))}for(;i<t.length;i+=1)t[i].d(1);t.length=l.length}},d(n){n&&v(e),le(t,n)}}}function Be(a){let e,s,l,t,n,d,i,w,p,h,E,m,G,H,k,g,D,q,M,u,C="2025 - 榛果繽紛樂",y;ee.title=e=a[0]+" - 榛果繽紛樂";const N=[Ce,Ie,Oe],_=[];function L(r,o){return o&64&&(H=null),r[7]?0:(H==null&&(H=Object.keys(r[6]).length==0),H?1:2)}return k=L(a,-1),g=_[k]=N[k](a),{c(){s=F(),l=j("div"),t=j("img"),d=F(),i=j("div"),w=j("h1"),p=x(a[0]),h=F(),E=j("h2"),m=x(a[1]),G=F(),g.c(),D=F(),q=j("div"),M=F(),u=j("footer"),u.textContent=C,this.h()},l(r){we("svelte-wrcujp",ee.head).forEach(v),s=U(r),l=T(r,"DIV",{class:!0});var f=O(l);t=T(f,"IMG",{src:!0,alt:!0,style:!0}),d=U(f),i=T(f,"DIV",{class:!0});var c=O(i);w=T(c,"H1",{class:!0});var B=O(w);p=J(B,a[0]),B.forEach(v),h=U(c),E=T(c,"H2",{class:!0});var I=O(E);m=J(I,a[1]),I.forEach(v),c.forEach(v),G=U(f),g.l(f),f.forEach(v),D=U(r),q=T(r,"DIV",{id:!0,style:!0}),O(q).forEach(v),M=U(r),u=T(r,"FOOTER",{class:!0,"data-svelte-h":!0}),Y(u)!=="svelte-livmhd"&&(u.textContent=C),this.h()},h(){ke(t.src,n="https://src.hazelnut-paradise.com/GooMapReviewSnatcher.png")||S(t,"src",n),S(t,"alt","GooMapReviewSnatcher"),K(t,"width","100%"),K(t,"max-width","150px"),S(w,"class","title svelte-vqnkcd"),S(E,"class","subtitle svelte-vqnkcd"),S(i,"class","title-box svelte-vqnkcd"),S(l,"class","container svelte-vqnkcd"),S(q,"id","navbar-placeholder"),K(q,"height","50px"),K(q,"z-index","100"),S(u,"class","svelte-vqnkcd")},m(r,o){R(r,s,o),R(r,l,o),b(l,t),b(l,d),b(l,i),b(i,w),b(w,p),b(i,h),b(i,E),b(E,m),b(l,G),_[k].m(l,null),R(r,D,o),R(r,q,o),R(r,M,o),R(r,u,o),y=!0},p(r,[o]){(!y||o&1)&&e!==(e=r[0]+" - 榛果繽紛樂")&&(ee.title=e),(!y||o&1)&&z(p,r[0]),(!y||o&2)&&z(m,r[1]);let f=k;k=L(r,o),k===f?_[k].p(r,o):(Ee(),P(_[f],1,1,()=>{_[f]=null}),me(),g=_[k],g?g.p(r,o):(g=_[k]=N[k](r),g.c()),Q(g,1),g.m(l,null))},i(r){y||(Q(g),y=!0)},o(r){P(g),y=!1},d(r){r&&(v(s),v(l),v(D),v(q),v(M),v(u)),_[k].d()}}}const De="/api/search",Re="/api/reviews";function Ue(a,e,s){let{title:l}=e,{subtitle:t}=e,n="",d="",i=1,w=[],p=[],h=!1;const E=async()=>{if(s(7,h=!0),console.log(n),n===""){alert("請輸入搜尋關鍵字"),s(7,h=!1);return}try{const u=await fetch(De+`?storeName=${n}`);if(!u.ok){console.error("Error:",u.statusText),alert("無法取得搜尋結果");return}s(5,w=await u.json()),console.log(w)}catch(u){console.error(u),alert("無法取得搜尋結果")}finally{s(7,h=!1)}},m=async()=>{if(s(7,h=!0),console.log(d),d===""){alert("請選擇店家"),s(7,h=!1);return}try{const u=await fetch(Re+`?storeID=${d.ID}&pages=${i}`);if(!u.ok){console.error("Error:",u.statusText),alert("無法取得評論");return}s(6,p=await u.json()),console.log(p)}catch(u){console.error(u),alert("無法取得評論")}finally{s(7,h=!1)}},G=u=>{const C=document.createElement("a");let y="";switch(u){case"csv":const N=new Uint8Array([239,187,191]),_=Object.keys(p[0]).join(","),L=p.map(B=>Object.values(B).map(I=>typeof I=="string"&&(I.includes(",")||I.includes(`
`)||I.includes('"'))?`"${I.replace(/"/g,'""')}"`:I).join(",")),r=_+`
`+L.join(`
`),o=new Blob([N,r],{type:"text/csv;charset=utf-8"});y=window.URL.createObjectURL(o),C.href=y,C.download=`${d.Name}.csv`,C.click();break;case"json":const f=JSON.stringify(p,null,2),c=new Blob([f],{type:"application/json;charset=utf-8"});y=window.URL.createObjectURL(c),C.href=y,C.download=`${d.Name}.json`,C.click();break}window.URL.revokeObjectURL(y)};Te(async()=>{getNavbar()});function H(u){i=u,s(4,i)}function k(u){n=u,s(2,n)}function g(u){d=u,s(3,d)}const D=()=>{s(2,n=""),s(5,w=[]),s(6,p=[])},q=()=>G("csv"),M=()=>G("json");return a.$$set=u=>{"title"in u&&s(0,l=u.title),"subtitle"in u&&s(1,t=u.subtitle)},[l,t,n,d,i,w,p,h,E,m,G,H,k,g,D,q,M]}class He extends pe{constructor(e){super(),be(this,e,Ue,Be,ge,{title:0,subtitle:1})}}export{He as default};
