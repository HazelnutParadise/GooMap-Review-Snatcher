import{S as A,i as G,s as h,c as q,d as b,a as $,t as u,b as l,g as k,e as g,f as y,m as E,h as w,j,k as m,l as W,n as D,o as _,p as S,q as H}from"../chunks/index-CtmGPglQ.js";function L(s,n){const r={},e={},t={$$scope:1};let o=s.length;for(;o--;){const c=s[o],i=n[o];if(i){for(const a in c)a in i||(e[a]=1);for(const a in i)t[a]||(r[a]=i[a],t[a]=1);s[o]=i}else for(const a in c)t[a]=1}for(const c in e)c in r||(r[c]=void 0);return r}function R(s){return typeof s=="object"&&s!==null?s:{}}function C(s){let n,r;return n=new B({props:{node:s[1],index:s[0]+1}}),{c(){y(n.$$.fragment)},l(e){j(n.$$.fragment,e)},m(e,t){E(n,e,t),r=!0},p(e,t){const o={};t&2&&(o.node=e[1]),t&1&&(o.index=e[0]+1),n.$set(o)},i(e){r||(l(n.$$.fragment,e),r=!0)},o(e){u(n.$$.fragment,e),r=!1},d(e){$(n,e)}}}function M(s){let n,r,e=s[1]&&C(s);return{c(){e&&e.c(),n=m()},l(t){e&&e.l(t),n=m()},m(t,o){e&&e.m(t,o),w(t,n,o),r=!0},p(t,o){t[1]?e?(e.p(t,o),o&2&&l(e,1)):(e=C(t),e.c(),l(e,1),e.m(n.parentNode,n)):e&&(k(),u(e,1,1,()=>{e=null}),g())},i(t){r||(l(e),r=!0)},o(t){u(e),r=!1},d(t){t&&b(n),e&&e.d(t)}}}function I(s){let n=s[1],r,e,t=M(s);return{c(){t.c(),r=m()},l(o){t.l(o),r=m()},m(o,c){t.m(o,c),w(o,r,c),e=!0},p(o,c){c&2&&h(n,n=o[1])?(k(),u(t,1,1,_),g(),t=M(o),t.c(),l(t,1),t.m(r.parentNode,r)):t.p(o,c)},i(o){e||(l(t),e=!0)},o(o){u(t),e=!1},d(o){o&&b(r),t.d(o)}}}function J(s){let n,r,e;const t=[s[3].props];var o=s[3].comp;function c(i,a){let f={$$slots:{default:[I]},$$scope:{ctx:i}};for(let P=0;P<t.length;P+=1)f=D(f,t[P]);return a!==void 0&&a&8&&(f=D(f,L(t,[R(i[3].props)]))),{props:f}}return o&&(n=q(o,c(s))),{c(){n&&y(n.$$.fragment),r=m()},l(i){n&&j(n.$$.fragment,i),r=m()},m(i,a){n&&E(n,i,a),w(i,r,a),e=!0},p(i,[a]){if(o!==(o=i[3].comp)){if(n){k();const f=n;u(f.$$.fragment,1,0,()=>{$(f,1)}),g()}o?(n=q(o,c(i,a)),y(n.$$.fragment),l(n.$$.fragment,1),E(n,r.parentNode,r)):n=null}else if(o){const f=a&8?L(t,[R(i[3].props)]):{};a&35&&(f.$$scope={dirty:a,ctx:i}),n.$set(f)}},i(i){e||(n&&l(n.$$.fragment,i),e=!0)},o(i){n&&u(n.$$.fragment,i),e=!1},d(i){i&&b(r),n&&$(n,i)}}}function K(s,n,r){let e,{node:t}=n,{index:o}=n;const{next:c,content:i}=t;return W(s,c,a=>r(1,e=a)),s.$$set=a=>{"node"in a&&r(4,t=a.node),"index"in a&&r(0,o=a.index)},[o,e,c,i,t]}class O extends A{constructor(n){super(),G(this,n,K,J,h,{node:4,index:0})}}function Q(s){const n=s.props.node.content.ssrError;return n?new s.props.node.content.errPage({...s,props:n}):new O(s)}const B=Q,d=[];function N(s,n=_){let r;const e=new Set;function t(i){if(h(s,i)&&(s=i,r)){const a=!d.length;for(const f of e)f[1](),d.push(f,s);if(a){for(let f=0;f<d.length;f+=2)d[f][0](d[f+1]);d.length=0}}}function o(i){t(i(s))}function c(i,a=_){const f=[i,a];return e.add(f),e.size===1&&(r=n(t,o)||_),i(s),()=>{e.delete(f),e.size===0&&r&&(r(),r=null)}}return{set:t,update:o,subscribe:c}}function U(s){let n=N(null);for(let r=s.length-1;r>=0;r--)n=N({content:s[r],next:n});return n}let p;function T(s,n){p={},p.url=N(new URL(s)),p.node=U(n),p.hrefMap={[s]:new Promise(r=>r(n))},p.update=async r=>{p.url.set(new URL(r));const e=await(p.hrefMap[r]??V(r));let t=p.node,o=U(e);for(;;){const c=S(t),i=S(o);if(!c&&!i)break;const a=c==null?void 0:c.content.comp,f=i==null?void 0:i.content.comp;if(a===f)t=c.next,o=i.next;else{t.set(i);break}}}}async function V(s){const e=await(await fetch(s,{headers:{Golte:"true"}})).json();for(const o of[...e.Entries,e.ErrPage])for(const c of o.CSS){if(document.querySelector(`link[href="${c}"][rel="stylesheet"]`))continue;const i=document.createElement("link");i.href=c,i.rel="stylesheet",document.head.appendChild(i)}const t=e.Entries.map(async o=>({comp:(await import(o.File)).default,props:o.Props,errPage:(await import(e.ErrPage.File)).default}));return await Promise.all(t)}function z(s){let n,r;return n=new B({props:{node:s[0],index:0}}),{c(){y(n.$$.fragment)},l(e){j(n.$$.fragment,e)},m(e,t){E(n,e,t),r=!0},p(e,t){const o={};t&1&&(o.node=e[0]),n.$set(o)},i(e){r||(l(n.$$.fragment,e),r=!0)},o(e){u(n.$$.fragment,e),r=!1},d(e){$(n,e)}}}function F(s){let n,r,e=s[0]&&z(s);return{c(){e&&e.c(),n=m()},l(t){e&&e.l(t),n=m()},m(t,o){e&&e.m(t,o),w(t,n,o),r=!0},p(t,o){t[0]?e?(e.p(t,o),o&1&&l(e,1)):(e=z(t),e.c(),l(e,1),e.m(n.parentNode,n)):e&&(k(),u(e,1,1,()=>{e=null}),g())},i(t){r||(l(e),r=!0)},o(t){u(e),r=!1},d(t){t&&b(n),e&&e.d(t)}}}function X(s){let n=s[0],r,e,t=F(s);return{c(){t.c(),r=m()},l(o){t.l(o),r=m()},m(o,c){t.m(o,c),w(o,r,c),e=!0},p(o,[c]){c&1&&h(n,n=o[0])?(k(),u(t,1,1,_),g(),t=F(o),t.c(),l(t,1),t.m(r.parentNode,r)):t.p(o,c)},i(o){e||(l(t),e=!0)},o(o){u(t),e=!1},d(o){o&&b(r),t.d(o)}}}function Y(s,n,r){let e,{nodes:t}=n,{contextData:o}=n;T(o.URL,t);const{node:c}=p;return W(s,c,i=>r(0,e=i)),H(()=>{history.replaceState(S(p.url).href,""),addEventListener("popstate",async i=>{i.state&&await p.update(i.state)})}),s.$$set=i=>{"nodes"in i&&r(2,t=i.nodes),"contextData"in i&&r(3,o=i.contextData)},[e,c,t,o]}class Z extends A{constructor(n){super(),G(this,n,Y,X,h,{nodes:2,contextData:3})}}async function v(s,n,r){const e=Promise.all(n.map(async t=>({comp:(await import(t.comp)).default,props:t.props,errPage:(await import(t.errPage)).default,ssrError:t.ssrError})));new Z({target:s,props:{nodes:await e,contextData:r},hydrate:!0})}export{v as hydrate};
