"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});function E(){}function ee(e){return e()}function ne(){return Object.create(null)}function te(e){e.forEach(ee)}function Ae(e,n){return e!=e?n==n:e!==n||e&&typeof e=="object"||typeof e=="function"}function U(e,...n){if(e==null){for(const s of n)s(void 0);return E}const t=e.subscribe(...n);return t.unsubscribe?()=>t.unsubscribe():t}let B;function j(e){B=e}function oe(){if(!B)throw new Error("Function called outside component initialization");return B}function re(e){return oe().$$.context.get(e)}function se(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}const ie=/[&"<]/g,ae=/[&<]/g;function u(e,n=!1){const t=String(e),s=n?ie:ae;s.lastIndex=0;let o="",r=0;for(;s.test(t);){const i=s.lastIndex-1,A=t[i];o+=t.substring(r,i)+(A==="&"?"&amp;":A==='"'?"&quot;":"&lt;"),r=i+1}return o+t.substring(r)}function y(e,n){e=se(e);let t="";for(let s=0;s<e.length;s+=1)t+=n(e[s],s);return t}const le={$$render:()=>""};function b(e,n){if(!e||!e.$$render)throw n==="svelte:component"&&(n+=" this={...}"),new Error(`<${n}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules. Otherwise you may need to fix a <${n}>.`);return e}let M;function p(e){function n(t,s,o,r,i){const A=B,l={on_destroy:M,context:new Map(i||(A?A.$$.context:[])),on_mount:[],before_update:[],after_update:[],callbacks:ne()};j({$$:l});const a=e(t,s,o,r);return j(A),a}return{render:(t={},{$$slots:s={},context:o=new Map}={})=>{M=[];const r={title:"",head:"",css:new Set},i=n(r,t,{},s,o);return te(M),{html:i,css:{code:Array.from(r.css).map(A=>A.code).join(`
`),map:null},head:r.title+r.head}},$$render:n}}function x(e,n,t){if(n==null||t)return"";const s=`="${u(n,!0)}"`;return` ${e}${s}`}const Ce=p((e,n,t,s)=>{let o,r,{node:i}=n,{index:A}=n;const{next:l,content:a}=i;return r=U(l,d=>o=d),n.node===void 0&&t.node&&i!==void 0&&t.node(i),n.index===void 0&&t.index&&A!==void 0&&t.index(A),r(),`  ${b(a.comp||le,"svelte:component").$$render(e,Object.assign({},a.props),{},{default:()=>` ${o?` ${b(W,"Node").$$render(e,{node:o,index:A+1},{},{})}`:""}`})}`}),L=Symbol(),R=Ce,ce={...R,$$render:(e,n,t,s,o)=>{try{return R.$$render(e,n,t,s,o)}catch{const A={status:500,message:"Internal Error"};return re(L)({index:n.index,props:A}),n.node.content.errPage.$$render(e,A,t,s,o)}}},W=ce,m=[];function O(e,n=E){let t;const s=new Set;function o(A){if(Ae(e,A)&&(e=A,t)){const l=!m.length;for(const a of s)a[1](),m.push(a,e);if(l){for(let a=0;a<m.length;a+=2)m[a][0](m[a+1]);m.length=0}}}function r(A){o(A(e))}function i(A,l=E){const a=[A,l];return s.add(a),s.size===1&&(t=n(o,r)||E),A(e),()=>{s.delete(a),s.size===0&&t&&(t(),t=null)}}return{set:o,update:r,subscribe:i}}function de(e){let n=O(null);for(let t=e.length-1;t>=0;t--)n=O({content:e[t],next:n});return n}let I;function ue(e,n){I={},I.url=O(new URL(e)),I.node=de(n)}const pe=p((e,n,t,s)=>{let o,r,{nodes:i}=n,{contextData:A}=n;ue(A.URL,i);const{node:l}=I;return r=U(l,a=>o=a),n.nodes===void 0&&t.nodes&&i!==void 0&&t.nodes(i),n.contextData===void 0&&t.contextData&&A!==void 0&&t.contextData(A),r(),` ${o?`${b(W,"Node").$$render(e,{node:o,index:0},{},{})}`:""}`}),be={code:"p.svelte-1qxq05z{margin:0;margin-bottom:10px}.info-card.svelte-1qxq05z{display:flex;flex-direction:column;justify-content:center;max-width:90vw;background-color:#70798c;border-radius:20px;padding:20px;color:white;margin-bottom:20px;font-size:medium}a.svelte-1qxq05z{color:#d8dcff;text-decoration:underline;font-weight:bold}a.svelte-1qxq05z:hover{color:#ffa400}",map:'{"version":3,"file":"InfoCard.svelte","sources":["InfoCard.svelte"],"sourcesContent":["<div class=\\"info-card\\">\\n  <p>\\n    <strong>估咩評論小扒手</strong> 幫你輕鬆爬取 Google Maps 商家評論，<br />\\n    輸入店名立即開始吧！\\n  </p>\\n  <a\\n    href=\\"https://github.com/HazelnutParadise/GooMap-Review-Snatcher\\"\\n    target=\\"_blank\\">查看 GitHub</a\\n  >\\n</div>\\n\\n<style>\\n  p {\\n    margin: 0;\\n    margin-bottom: 10px;\\n  }\\n\\n  .info-card {\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n    max-width: 90vw;\\n    background-color: #70798c;\\n    border-radius: 20px;\\n    padding: 20px;\\n    color: white;\\n    margin-bottom: 20px;\\n    font-size: medium;\\n  }\\n\\n  a {\\n    color: #d8dcff;\\n    text-decoration: underline;\\n    font-weight: bold;\\n  }\\n\\n  a:hover {\\n    color: #ffa400;\\n  }\\n</style>\\n"],"names":[],"mappings":"AAYE,gBAAE,CACA,MAAM,CAAE,CAAC,CACT,aAAa,CAAE,IACjB,CAEA,yBAAW,CACT,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,eAAe,CAAE,MAAM,CACvB,SAAS,CAAE,IAAI,CACf,gBAAgB,CAAE,OAAO,CACzB,aAAa,CAAE,IAAI,CACnB,OAAO,CAAE,IAAI,CACb,KAAK,CAAE,KAAK,CACZ,aAAa,CAAE,IAAI,CACnB,SAAS,CAAE,MACb,CAEA,gBAAE,CACA,KAAK,CAAE,OAAO,CACd,eAAe,CAAE,SAAS,CAC1B,WAAW,CAAE,IACf,CAEA,gBAAC,MAAO,CACN,KAAK,CAAE,OACT"}'},_=p((e,n,t,s)=>(e.css.add(be),`<div class="info-card svelte-1qxq05z" data-svelte-h="svelte-sw6odc"><p class="svelte-1qxq05z"><strong>估咩評論小扒手</strong> 幫你輕鬆爬取 Google Maps 商家評論，<br>
    輸入店名立即開始吧！</p> <a href="https://github.com/HazelnutParadise/GooMap-Review-Snatcher" target="_blank" class="svelte-1qxq05z">查看 GitHub</a> </div>`)),ve={code:'.input-form.svelte-1rgyys1{min-height:100px;width:500px;max-width:90vw;padding:20px;background-color:#70798c;border-radius:20px;display:flex;justify-items:center;align-items:center}.chose-store.svelte-1rgyys1{flex-direction:column;align-items:start}input[type="text"].svelte-1rgyys1{height:40px;width:80%;border-radius:15px;border:none;padding:5px;margin-right:10px}input[type="text"].svelte-1rgyys1:focus{border:3px solid #0a0903}input[type="number"].svelte-1rgyys1{height:40px;width:100%;border-radius:15px;border:none;padding:5px;margin-right:10px}button.svelte-1rgyys1{height:40px;width:20%;border-radius:15px;border:none;background-color:#0a0903;color:white;font-size:1rem;cursor:pointer}.button.svelte-1rgyys1:hover{background-color:#f1f1f1;color:#0a0903}.store-select.svelte-1rgyys1{height:40px;width:100%;border-radius:15px;border:none;padding:5px;margin-right:10px}.store-select-box.svelte-1rgyys1{width:100%;display:flex;flex-direction:column;margin-bottom:10px}.pages-box.svelte-1rgyys1{width:100%;display:flex;flex-direction:column;margin-bottom:10px}label.svelte-1rgyys1{font-weight:500;font-size:large;color:white;margin-bottom:5px}',map:'{"version":3,"file":"InputCard.svelte","sources":["InputCard.svelte"],"sourcesContent":["<script>\\n  import InfoCard from \\"./InfoCard.svelte\\";\\n  export let searchInputStr;\\n  export let selectedStore;\\n  export let pagesToFetch;\\n  export let handleSearch;\\n  export let handleGetReview;\\n  export let storeData = [];\\n  let form = null;\\n<\/script>\\n\\n{#if Object.keys(storeData).length !== 0}\\n  <form\\n    on:submit|preventDefault={handleGetReview}\\n    class=\\"input-form chose-store\\"\\n    bind:this={form}\\n  >\\n    <div class=\\"store-select-box\\">\\n      <label for=\\"store\\">選擇店家</label>\\n      <select bind:value={selectedStore} class=\\"store-select\\">\\n        {#each storeData as store}\\n          <option value={store}>{store.Name}</option>\\n        {/each}\\n      </select>\\n    </div>\\n    <div class=\\"pages-box\\">\\n      <label for=\\"pages\\">輸入頁數，0代表全部（一頁10筆）</label>\\n      <input\\n        type=\\"number\\"\\n        inputmode=\\"numeric\\"\\n        min=\\"0\\"\\n        name=\\"pages\\"\\n        placeholder=\\"輸入頁數\\"\\n        bind:value={pagesToFetch}\\n      />\\n    </div>\\n    <button type=\\"submit\\" class=\\"button\\">確定</button>\\n  </form>\\n{:else}\\n  <InfoCard />\\n  <form\\n    on:submit|preventDefault={handleSearch}\\n    class=\\"input-form\\"\\n    bind:this={form}\\n  >\\n    <input type=\\"text\\" placeholder=\\"輸入關鍵字\\" bind:value={searchInputStr} />\\n    <button type=\\"submit\\" class=\\"button\\">搜尋</button>\\n  </form>\\n{/if}\\n\\n<style>\\n  .input-form {\\n    min-height: 100px;\\n    width: 500px;\\n    max-width: 90vw;\\n    padding: 20px;\\n    background-color: #70798c;\\n    border-radius: 20px;\\n    display: flex;\\n    justify-items: center;\\n    align-items: center;\\n  }\\n\\n  .chose-store {\\n    flex-direction: column;\\n    align-items: start;\\n  }\\n\\n  input[type=\\"text\\"] {\\n    height: 40px;\\n    width: 80%;\\n    border-radius: 15px;\\n    border: none;\\n    padding: 5px;\\n    margin-right: 10px;\\n  }\\n\\n  input[type=\\"text\\"]:focus {\\n    border: 3px solid #0a0903;\\n  }\\n\\n  input[type=\\"number\\"] {\\n    height: 40px;\\n    width: 100%;\\n    border-radius: 15px;\\n    border: none;\\n    padding: 5px;\\n    margin-right: 10px;\\n  }\\n\\n  button {\\n    height: 40px;\\n    width: 20%;\\n    border-radius: 15px;\\n    border: none;\\n    background-color: #0a0903;\\n    color: white;\\n    font-size: 1rem;\\n    cursor: pointer;\\n  }\\n\\n  .button:hover {\\n    background-color: #f1f1f1;\\n    color: #0a0903;\\n  }\\n\\n  .store-select {\\n    height: 40px;\\n    width: 100%;\\n    border-radius: 15px;\\n    border: none;\\n    padding: 5px;\\n    margin-right: 10px;\\n  }\\n  .store-select-box {\\n    width: 100%;\\n    display: flex;\\n    flex-direction: column;\\n    margin-bottom: 10px;\\n  }\\n\\n  .pages-box {\\n    width: 100%;\\n    display: flex;\\n    flex-direction: column;\\n    margin-bottom: 10px;\\n  }\\n\\n  label {\\n    font-weight: 500;\\n    font-size: large;\\n    color: white;\\n    margin-bottom: 5px;\\n  }\\n</style>\\n"],"names":[],"mappings":"AAmDE,0BAAY,CACV,UAAU,CAAE,KAAK,CACjB,KAAK,CAAE,KAAK,CACZ,SAAS,CAAE,IAAI,CACf,OAAO,CAAE,IAAI,CACb,gBAAgB,CAAE,OAAO,CACzB,aAAa,CAAE,IAAI,CACnB,OAAO,CAAE,IAAI,CACb,aAAa,CAAE,MAAM,CACrB,WAAW,CAAE,MACf,CAEA,2BAAa,CACX,cAAc,CAAE,MAAM,CACtB,WAAW,CAAE,KACf,CAEA,KAAK,CAAC,IAAI,CAAC,MAAM,gBAAE,CACjB,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,GAAG,CACV,aAAa,CAAE,IAAI,CACnB,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,GAAG,CACZ,YAAY,CAAE,IAChB,CAEA,KAAK,CAAC,IAAI,CAAC,MAAM,gBAAC,MAAO,CACvB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OACpB,CAEA,KAAK,CAAC,IAAI,CAAC,QAAQ,gBAAE,CACnB,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,CACX,aAAa,CAAE,IAAI,CACnB,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,GAAG,CACZ,YAAY,CAAE,IAChB,CAEA,qBAAO,CACL,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,GAAG,CACV,aAAa,CAAE,IAAI,CACnB,MAAM,CAAE,IAAI,CACZ,gBAAgB,CAAE,OAAO,CACzB,KAAK,CAAE,KAAK,CACZ,SAAS,CAAE,IAAI,CACf,MAAM,CAAE,OACV,CAEA,sBAAO,MAAO,CACZ,gBAAgB,CAAE,OAAO,CACzB,KAAK,CAAE,OACT,CAEA,4BAAc,CACZ,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,CACX,aAAa,CAAE,IAAI,CACnB,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,GAAG,CACZ,YAAY,CAAE,IAChB,CACA,gCAAkB,CAChB,KAAK,CAAE,IAAI,CACX,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,aAAa,CAAE,IACjB,CAEA,yBAAW,CACT,KAAK,CAAE,IAAI,CACX,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,aAAa,CAAE,IACjB,CAEA,oBAAM,CACJ,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,KAAK,CAChB,KAAK,CAAE,KAAK,CACZ,aAAa,CAAE,GACjB"}'},D=p((e,n,t,s)=>{let{searchInputStr:o}=n,{selectedStore:r}=n,{pagesToFetch:i}=n,{handleSearch:A}=n,{handleGetReview:l}=n,{storeData:a=[]}=n,d=null;return n.searchInputStr===void 0&&t.searchInputStr&&o!==void 0&&t.searchInputStr(o),n.selectedStore===void 0&&t.selectedStore&&r!==void 0&&t.selectedStore(r),n.pagesToFetch===void 0&&t.pagesToFetch&&i!==void 0&&t.pagesToFetch(i),n.handleSearch===void 0&&t.handleSearch&&A!==void 0&&t.handleSearch(A),n.handleGetReview===void 0&&t.handleGetReview&&l!==void 0&&t.handleGetReview(l),n.storeData===void 0&&t.storeData&&a!==void 0&&t.storeData(a),e.css.add(ve),`${Object.keys(a).length!==0?`<form class="input-form chose-store svelte-1rgyys1"${x("this",d,0)}><div class="store-select-box svelte-1rgyys1"><label for="store" class="svelte-1rgyys1" data-svelte-h="svelte-cly9uh">選擇店家</label> <select class="store-select svelte-1rgyys1">${y(a,c=>`<option${x("value",c,0)}>${u(c.Name)}</option>`)}</select></div> <div class="pages-box svelte-1rgyys1"><label for="pages" class="svelte-1rgyys1" data-svelte-h="svelte-4pnq66">輸入頁數，0代表全部（一頁10筆）</label> <input type="number" inputmode="numeric" min="0" name="pages" placeholder="輸入頁數" class="svelte-1rgyys1"${x("value",i,0)}></div> <button type="submit" class="button svelte-1rgyys1" data-svelte-h="svelte-tcqmmk">確定</button></form>`:`${b(_,"InfoCard").$$render(e,{},{},{})} <form class="input-form svelte-1rgyys1"${x("this",d,0)}><input type="text" placeholder="輸入關鍵字" class="svelte-1rgyys1"${x("value",o,0)}> <button type="submit" class="button svelte-1rgyys1" data-svelte-h="svelte-1jb2twj">搜尋</button></form>`}`}),he={code:".loader-container.svelte-nx5s04{display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:100px}.loader.svelte-nx5s04{width:48px;height:48px;border:5px solid #f3f3f3;border-top:5px solid #3498db;border-radius:50%;animation:svelte-nx5s04-spin 1s linear infinite}@keyframes svelte-nx5s04-spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}",map:`{"version":3,"file":"Loader.svelte","sources":["Loader.svelte"],"sourcesContent":["<script>\\n    const loadingWords = ['loading', 'loading.', 'loading..', 'loading...'];\\n    let loadingWord = loadingWords[0];\\n    let index = 1;\\n    const interval = setInterval(() => {\\n        loadingWord = loadingWords[index];\\n        index = (index + 1) % loadingWords.length;\\n    }, 500);\\n<\/script>\\n\\n<div class=\\"loader-container\\">\\n    <p>{loadingWord}</p>\\n    <div class=\\"loader\\"></div>\\n</div>\\n\\n<style>\\n    .loader-container {\\n        display: flex;\\n        flex-direction: column;\\n        justify-content: center;\\n        align-items: center;\\n        min-height: 100px;\\n    }\\n\\n    .loader {\\n        width: 48px;\\n        height: 48px;\\n        border: 5px solid #f3f3f3;\\n        border-top: 5px solid #3498db;\\n        border-radius: 50%;\\n        animation: spin 1s linear infinite;\\n    }\\n\\n    @keyframes spin {\\n        0% {\\n        transform: rotate(0deg);\\n        }\\n        100% {\\n        transform: rotate(360deg);\\n        }\\n    }\\n</style>"],"names":[],"mappings":"AAgBI,+BAAkB,CACd,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,CACnB,UAAU,CAAE,KAChB,CAEA,qBAAQ,CACJ,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,UAAU,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAC7B,aAAa,CAAE,GAAG,CAClB,SAAS,CAAE,kBAAI,CAAC,EAAE,CAAC,MAAM,CAAC,QAC9B,CAEA,WAAW,kBAAK,CACZ,EAAG,CACH,SAAS,CAAE,OAAO,IAAI,CACtB,CACA,IAAK,CACL,SAAS,CAAE,OAAO,MAAM,CACxB,CACJ"}`},k=p((e,n,t,s)=>{const o=["loading","loading.","loading..","loading..."];let r=o[0],i=1;return setInterval(()=>{r=o[i],i=(i+1)%o.length},500),e.css.add(he),`<div class="loader-container svelte-nx5s04"><p>${u(r)}</p> <div class="loader svelte-nx5s04"></div> </div>`}),T=p((e,n,t,s)=>'<div id="div-onead-draft"></div>'),fe=p((e,n,t,s)=>`<div style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; display: flex; flex-direction: column; justify-content: center; align-items: center; background-color: #D6E3F8;"><h1 data-svelte-h="svelte-1byi0a0">正在轉移陣地</h1> <p data-svelte-h="svelte-7x4vnz">請稍等片刻...</p> ${b(k,"Loader").$$render(e,{},{},{})}</div>`),ge={code:".review-box.svelte-1d9uiic.svelte-1d9uiic{width:80%}.store-name.svelte-1d9uiic.svelte-1d9uiic{font-size:1.5rem}.review-table.svelte-1d9uiic.svelte-1d9uiic{border-collapse:collapse;width:100%;background-color:white;box-shadow:0 4px 6px rgba(0, 0, 0, 0.1);border-radius:8px;overflow:hidden}.review-table.svelte-1d9uiic th.svelte-1d9uiic{background-color:#2c3e50;color:white;padding:12px 15px;text-align:left;font-weight:600}.review-table.svelte-1d9uiic td.svelte-1d9uiic{padding:12px 15px;border-bottom:1px solid #ddd}.review-table.svelte-1d9uiic tbody tr.svelte-1d9uiic:hover{background-color:#f5f5f5;transition:background-color 0.2s ease}.review-table.svelte-1d9uiic tbody tr:last-child td.svelte-1d9uiic{border-bottom:none}.review-table-box.svelte-1d9uiic.svelte-1d9uiic{width:100%;height:500px;overflow:auto;background-color:white;border-radius:8px;box-shadow:0 0 20px rgba(0, 0, 0, 0.1);padding:1rem}.review-table-box.svelte-1d9uiic.svelte-1d9uiic::-webkit-scrollbar{width:8px;height:8px}.review-table-box.svelte-1d9uiic.svelte-1d9uiic::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.review-table-box.svelte-1d9uiic.svelte-1d9uiic::-webkit-scrollbar-thumb{background:#888;border-radius:4px}.review-table-box.svelte-1d9uiic.svelte-1d9uiic::-webkit-scrollbar-thumb:hover{background:#555}.button.svelte-1d9uiic.svelte-1d9uiic{min-width:250px}.button.svelte-1d9uiic.svelte-1d9uiic:hover{background-color:#f1f1f1;color:#0a0903}.reset-button.svelte-1d9uiic.svelte-1d9uiic{height:50px;width:20%;border-radius:15px;border:2px solid #0a0903;background-color:#0a0903;color:white;font-size:1rem;cursor:pointer;margin-bottom:1rem}.download-button.svelte-1d9uiic.svelte-1d9uiic{height:40px;width:20%;border-radius:15px;border:1px solid #0a0903;background-color:#0a0903;color:white;font-size:1rem;cursor:pointer;margin-bottom:1rem}.mining-button.svelte-1d9uiic.svelte-1d9uiic{height:40px;width:20%;border-radius:15px;border:1px solid #ffa400;font-size:1rem;cursor:pointer;margin-bottom:1rem;background-color:#ffa400;color:black}.mining-button.svelte-1d9uiic.svelte-1d9uiic:hover{background-color:rgb(255, 128, 0);background-color:rgb(255, 128, 0)}",map:'{"version":3,"file":"Result.svelte","sources":["Result.svelte"],"sourcesContent":["<script>\\n  import { onMount } from \\"svelte\\";\\n  import Redirecting from \\"./Redirecting.svelte\\";\\n\\n  export let selectedStore;\\n  export let reviews;\\n  export let download;\\n  export let handleReset;\\n\\n  let goMining = false;\\n\\n  const mining = async (openNewPage) => {\\n    goMining = true;\\n    const reviewContent = reviews.map((review) => review.content);\\n    const reviewRating = reviews.map((review) => review.rating);\\n    let dataUUID = \\"\\";\\n\\n    const res = await fetch(\\"/api/review-mining\\", {\\n      method: \\"POST\\",\\n      headers: {\\n        \\"Content-Type\\": \\"application/json\\",\\n      },\\n      body: JSON.stringify({\\n        storeName: selectedStore.Name,\\n        reviews: reviewContent,\\n        ratings: reviewRating,\\n      }),\\n    });\\n    if (res.ok) {\\n      const data = await res.json();\\n      dataUUID = data.dataUUID;\\n    } else {\\n      console.error(\\"Error:\\", res.statusText);\\n      alert(\\"無法使用 StoreCoach 探勘\\");\\n      goMining = false;\\n      return;\\n    }\\n    const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\\n    const url = `https://storecoach.hazelnut-paradise.com/review-mining/${dataUUID}/`;\\n    openNewPage && !isSafari\\n      ? window.open(url, \\"_blank\\")\\n      : window.open(url, \\"_self\\");\\n\\n    if (openNewPage && !isSafari) goMining = false;\\n  };\\n\\n  let queryParams = {};\\n\\n  onMount(async () => {\\n    const params = new URLSearchParams(window.location.search);\\n    queryParams = Object.fromEntries(params.entries());\\n    console.log(queryParams);\\n    if (queryParams.mode && queryParams.mode === \\"storecoach\\") {\\n      await mining(false);\\n    }\\n  });\\n<\/script>\\n\\n{#if goMining}\\n  <Redirecting />\\n{:else}\\n  <button class=\\"reset-button button\\" on:click={handleReset}\\n    >查詢其他商家</button\\n  >\\n  <div class=\\"review-box\\">\\n    <h3 class=\\"store-name\\">{selectedStore.Name}</h3>\\n    <button class=\\"download-button button\\" on:click={() => download(\\"csv\\")}\\n      >下載 CSV</button\\n    >\\n    <button class=\\"download-button button\\" on:click={() => download(\\"json\\")}\\n      >下載 JSON</button\\n    >\\n    <button class=\\"mining-button button\\" on:click={() => mining(true)}\\n      >使用 <strong>StoreCoach</strong> 探勘</button\\n    >\\n    <div class=\\"review-table-box\\">\\n      <table class=\\"review-table\\">\\n        <thead>\\n          <tr>\\n            {#each Object.keys(reviews[0]) as key}\\n              {#if key === \\"content\\"}\\n                <th style=\\"min-width: 500px;\\">{key}</th>\\n              {:else if key === \\"reviewer_id\\"}\\n                <th style=\\"min-width: 400px;\\">{key}</th>\\n              {:else}\\n                <th>{key}</th>\\n              {/if}\\n            {/each}\\n          </tr>\\n        </thead>\\n        <tbody>\\n          {#each reviews as review}\\n            <tr>\\n              {#each Object.values(review) as value}\\n                <td>{value}</td>\\n              {/each}\\n            </tr>\\n          {/each}\\n        </tbody>\\n      </table>\\n    </div>\\n  </div>\\n{/if}\\n\\n<style>\\n  .review-box {\\n    width: 80%;\\n  }\\n\\n  .store-name {\\n    font-size: 1.5rem;\\n  }\\n\\n  .review-table {\\n    border-collapse: collapse;\\n    width: 100%;\\n    background-color: white;\\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\\n    border-radius: 8px;\\n    overflow: hidden;\\n  }\\n\\n  .review-table th {\\n    background-color: #2c3e50;\\n    color: white;\\n    padding: 12px 15px;\\n    text-align: left;\\n    font-weight: 600;\\n  }\\n\\n  .review-table td {\\n    padding: 12px 15px;\\n    border-bottom: 1px solid #ddd;\\n  }\\n\\n  .review-table tbody tr:hover {\\n    background-color: #f5f5f5;\\n    transition: background-color 0.2s ease;\\n  }\\n\\n  .review-table tbody tr:last-child td {\\n    border-bottom: none;\\n  }\\n\\n  .review-table-box {\\n    width: 100%;\\n    height: 500px;\\n    overflow: auto;\\n    background-color: white;\\n    border-radius: 8px;\\n    box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\\n    padding: 1rem;\\n  }\\n\\n  /* 美化捲軸 */\\n  .review-table-box::-webkit-scrollbar {\\n    width: 8px;\\n    height: 8px;\\n  }\\n\\n  .review-table-box::-webkit-scrollbar-track {\\n    background: #f1f1f1;\\n    border-radius: 4px;\\n  }\\n\\n  .review-table-box::-webkit-scrollbar-thumb {\\n    background: #888;\\n    border-radius: 4px;\\n  }\\n\\n  .review-table-box::-webkit-scrollbar-thumb:hover {\\n    background: #555;\\n  }\\n\\n  .button {\\n    min-width: 250px;\\n  }\\n\\n  .button:hover {\\n    background-color: #f1f1f1;\\n    color: #0a0903;\\n  }\\n\\n  .reset-button {\\n    height: 50px;\\n    width: 20%;\\n    border-radius: 15px;\\n    border: 2px solid #0a0903;\\n    background-color: #0a0903;\\n    color: white;\\n    font-size: 1rem;\\n    cursor: pointer;\\n    margin-bottom: 1rem;\\n  }\\n\\n  .download-button {\\n    height: 40px;\\n    width: 20%;\\n    border-radius: 15px;\\n    border: 1px solid #0a0903;\\n    background-color: #0a0903;\\n    color: white;\\n    font-size: 1rem;\\n    cursor: pointer;\\n    margin-bottom: 1rem;\\n  }\\n\\n  .mining-button {\\n    height: 40px;\\n    width: 20%;\\n    border-radius: 15px;\\n    border: 1px solid #ffa400;\\n    font-size: 1rem;\\n    cursor: pointer;\\n    margin-bottom: 1rem;\\n    background-color: #ffa400;\\n    color: black;\\n  }\\n\\n  .mining-button:hover {\\n    background-color: rgb(255, 128, 0);\\n    background-color: rgb(255, 128, 0);\\n  }\\n</style>\\n"],"names":[],"mappings":"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"}'},N=p((e,n,t,s)=>{let{selectedStore:o}=n,{reviews:r}=n,{download:i}=n,{handleReset:A}=n;return n.selectedStore===void 0&&t.selectedStore&&o!==void 0&&t.selectedStore(o),n.reviews===void 0&&t.reviews&&r!==void 0&&t.reviews(r),n.download===void 0&&t.download&&i!==void 0&&t.download(i),n.handleReset===void 0&&t.handleReset&&A!==void 0&&t.handleReset(A),e.css.add(ge),`${`<button class="reset-button button svelte-1d9uiic" data-svelte-h="svelte-1z0u94t">查詢其他商家</button> <div class="review-box svelte-1d9uiic"><h3 class="store-name svelte-1d9uiic">${u(o.Name)}</h3> <button class="download-button button svelte-1d9uiic" data-svelte-h="svelte-15p6db5">下載 CSV</button> <button class="download-button button svelte-1d9uiic" data-svelte-h="svelte-osw2el">下載 JSON</button> <button class="mining-button button svelte-1d9uiic" data-svelte-h="svelte-1a53k2q">使用 <strong>StoreCoach</strong> 探勘</button> <div class="review-table-box svelte-1d9uiic"><table class="review-table svelte-1d9uiic"><thead><tr class="svelte-1d9uiic">${y(Object.keys(r[0]),l=>`${l==="content"?`<th style="min-width: 500px;" class="svelte-1d9uiic">${u(l)}</th>`:`${l==="reviewer_id"?`<th style="min-width: 400px;" class="svelte-1d9uiic">${u(l)}</th>`:`<th class="svelte-1d9uiic">${u(l)}</th>`}`}`)}</tr></thead> <tbody>${y(r,l=>`<tr class="svelte-1d9uiic">${y(Object.values(l),a=>`<td class="svelte-1d9uiic">${u(a)}</td>`)} </tr>`)}</tbody></table></div></div>`}`}),me={code:"footer.svelte-14s16xz{width:100vw;height:50px;background-color:black;color:white;display:flex;justify-content:center;align-items:center}",map:'{"version":3,"file":"Layout.svelte","sources":["Layout.svelte"],"sourcesContent":["<script>\\n    import { onMount, onDestroy } from \\"svelte\\";\\n    import OneAd from \\"../components/OneAd.svelte\\";\\n\\n    let bannerContainer;\\n\\n    onMount(() => {\\n        // 確保 #Pistachio-Announcement 存在，並防止 Svelte 移除它\\n        bannerContainer = document.getElementById(\\"Pistachio-Announcement\\");\\n\\n        if (bannerContainer) {\\n            bannerContainer.setAttribute(\\"data-preserve\\", \\"true\\"); // 標記這個元素不應該被修改\\n        }\\n\\n        // 監聽 #Pistachio-Announcement 是否有變更（Workers 插入的內容）\\n        const observer = new MutationObserver((mutations) => {\\n            for (let mutation of mutations) {\\n                if (mutation.type === \\"childList\\") {\\n                    console.log(\\"Workers 插入的橫幅變更偵測到:\\", mutation);\\n                }\\n            }\\n        });\\n\\n        if (bannerContainer) {\\n            observer.observe(bannerContainer, { childList: true, subtree: true });\\n        }\\n\\n        return () => observer.disconnect(); // 確保組件卸載時停止監聽\\n    });\\n<\/script>\\n\\n<!-- 確保 Svelte 不會優化掉 #Pistachio-Announcement -->\\n<div id=\\"Pistachio-Announcement\\" bind:this={bannerContainer} style=\\"z-index: 100;\\">\\n    <span style=\\"display: none;\\">&nbsp;</span> <!-- 避免 Svelte 移除這個 div -->\\n</div>\\n\\n<div id=\\"navbar-placeholder\\" style=\\"min-height: 50px; z-index: 100;\\"></div>\\n<slot></slot>\\n<OneAd />\\n<footer>\\n    2025 - 榛果繽紛樂\\n</footer>\\n\\n<style>\\n    footer {\\n        width: 100vw;\\n        height: 50px;\\n        background-color: black;\\n        color: white;\\n        display: flex;\\n        justify-content: center;\\n        align-items: center;\\n    }\\n</style>\\n"],"names":[],"mappings":"AA4CI,qBAAO,CACH,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,IAAI,CACZ,gBAAgB,CAAE,KAAK,CACvB,KAAK,CAAE,KAAK,CACZ,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MACjB"}'},xe=p((e,n,t,s)=>{let o;return e.css.add(me),` <div id="Pistachio-Announcement" style="z-index: 100;"${x("this",o,0)} data-svelte-h="svelte-1p0eij2"><span style="display: none;"> </span> </div> <div id="navbar-placeholder" style="min-height: 50px; z-index: 100;"></div> ${s.default?s.default({}):""} ${b(T,"OneAd").$$render(e,{},{},{})} <footer class="svelte-14s16xz" data-svelte-h="svelte-livmhd">2025 - 榛果繽紛樂
</footer>`}),we={code:".container.svelte-fc3bky{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;padding-top:20px;padding-bottom:20px}.title-box.svelte-fc3bky{display:flex;flex-direction:column;align-items:start;justify-content:center;margin-bottom:1rem;transition:transform 0.3s ease}.title.svelte-fc3bky{font-size:2.5rem;color:#2c3e50;margin:0;text-shadow:2px 2px 4px rgba(0, 0, 0, 0.1)}.title-box.svelte-fc3bky:hover{transform:scale(1.05)}.subtitle.svelte-fc3bky{font-size:1.5rem;color:#0a0903;margin:0}@keyframes svelte-fc3bky-pop{0%{transform:scale(1)}50%{transform:scale(1.1)}100%{transform:scale(1)}}",map:'{"version":3,"file":"App.svelte","sources":["App.svelte"],"sourcesContent":["<script>\\n  import { onMount } from \\"svelte\\";\\n  import InputCard from \\"../components/InputCard.svelte\\";\\n  import Loader from \\"../components/Loader.svelte\\";\\n  import Result from \\"../components/Result.svelte\\";\\n  export let title;\\n  export let subtitle;\\n  const searchStoreUrl = \\"/api/search\\";\\n  const getReviewsUrl = \\"/api/reviews\\";\\n  let searchInputStr = \\"\\";\\n  let selectedStore = \\"\\";\\n  let pagesToFetch = 1;\\n  let storeData = [];\\n  let reviews = [];\\n\\n  let isLoading = false;\\n\\n  const handleReset = () => {\\n    searchInputStr = \\"\\";\\n    selectedStore = \\"\\";\\n    pagesToFetch = 1;\\n    storeData = [];\\n    reviews = [];\\n  };\\n\\n  const handleSearch = async () => {\\n    isLoading = true;\\n    console.log(searchInputStr);\\n    if (searchInputStr === \\"\\") {\\n      alert(\\"請輸入搜尋關鍵字\\");\\n      isLoading = false;\\n      return;\\n    }\\n    try {\\n      const res = await fetch(searchStoreUrl + `?storeName=${searchInputStr}`);\\n      if (!res.ok) {\\n        console.error(\\"Error:\\", res.statusText);\\n        alert(\\"無法取得搜尋結果\\");\\n        return;\\n      }\\n      storeData = await res.json();\\n      console.log(storeData);\\n    } catch (e) {\\n      console.error(e);\\n      alert(\\"無法取得搜尋結果\\");\\n    } finally {\\n      isLoading = false;\\n    }\\n  };\\n  const handleGetReview = async () => {\\n    isLoading = true;\\n    console.log(selectedStore);\\n    if (selectedStore === \\"\\") {\\n      alert(\\"請選擇店家\\");\\n      isLoading = false;\\n      return;\\n    }\\n    try {\\n      const res = await fetch(\\n        getReviewsUrl + `?storeID=${selectedStore.ID}&pages=${pagesToFetch}`\\n      );\\n      if (!res.ok) {\\n        console.error(\\"Error:\\", res.statusText);\\n        alert(\\"無法取得評論\\");\\n        return;\\n      }\\n      reviews = await res.json();\\n      console.log(reviews);\\n    } catch (e) {\\n      console.error(e);\\n      alert(\\"無法取得評論\\");\\n    } finally {\\n      isLoading = false;\\n    }\\n  };\\n\\n  const download = (type) => {\\n    const a = document.createElement(\\"a\\");\\n    let url = \\"\\";\\n    switch (type) {\\n      case \\"csv\\":\\n        // 添加 BOM 標記\\n        const BOM = new Uint8Array([0xef, 0xbb, 0xbf]);\\n        // 建立 CSV 內容，加入標題列\\n        const headers = Object.keys(reviews[0]).join(\\",\\");\\n        const rows = reviews.map((row) =>\\n          Object.values(row)\\n            .map((value) => {\\n              // 處理數值、字串中的特殊字元\\n              if (typeof value === \\"string\\") {\\n                // 如果內容包含逗號、換行或雙引號，就用雙引號包起來\\n                if (\\n                  value.includes(\\",\\") ||\\n                  value.includes(\\"\\\\n\\") ||\\n                  value.includes(\'\\"\')\\n                ) {\\n                  return `\\"${value.replace(/\\"/g, \'\\"\\"\')}\\"`;\\n                }\\n              }\\n              return value;\\n            })\\n            .join(\\",\\")\\n        );\\n        const csvContent = headers + \\"\\\\n\\" + rows.join(\\"\\\\n\\");\\n\\n        // 合併 BOM 和 CSV 內容\\n        const csvBlob = new Blob([BOM, csvContent], {\\n          type: \\"text/csv;charset=utf-8\\",\\n        });\\n        url = window.URL.createObjectURL(csvBlob);\\n\\n        a.href = url;\\n        a.download = `${selectedStore.Name}.csv`;\\n        a.click();\\n        break;\\n      case \\"json\\":\\n        const json = JSON.stringify(reviews, null, 2);\\n        const jsonBlob = new Blob([json], {\\n          type: \\"application/json;charset=utf-8\\",\\n        });\\n        url = window.URL.createObjectURL(jsonBlob);\\n        a.href = url;\\n        a.download = `${selectedStore.Name}.json`;\\n        a.click();\\n        break;\\n      default:\\n        break;\\n    }\\n    window.URL.revokeObjectURL(url);\\n  };\\n\\n  onMount(async () => {\\n    getNavbar();\\n  });\\n<\/script>\\n\\n<svelte:head>\\n  <title>{title} - 榛果繽紛樂</title>\\n</svelte:head>\\n\\n<div class=\\"container\\">\\n  <img\\n    src=\\"https://src.hazelnut-paradise.com/GooMapReviewSnatcher.png\\"\\n    alt=\\"GooMapReviewSnatcher\\"\\n    style=\\"width: 100%; max-width: 150px;\\"\\n  />\\n  <div class=\\"title-box\\">\\n    <h1 class=\\"title\\">{title}</h1>\\n    <h2 class=\\"subtitle\\">{subtitle}</h2>\\n  </div>\\n  {#if isLoading}\\n    <Loader />\\n  {:else if Object.keys(reviews).length == 0}\\n    <InputCard\\n      bind:searchInputStr\\n      bind:selectedStore\\n      bind:storeData\\n      bind:pagesToFetch\\n      {handleSearch}\\n      {handleGetReview}\\n    />\\n  {:else}\\n    <Result bind:reviews {selectedStore} {download} {handleReset} />\\n  {/if}\\n</div>\\n\\n<style>\\n  .container {\\n    display: flex;\\n    flex-direction: column;\\n    align-items: center;\\n    justify-content: center;\\n    min-height: 100vh;\\n    padding-top: 20px;\\n    padding-bottom: 20px;\\n    /* background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); */\\n  }\\n\\n  .title-box {\\n    display: flex;\\n    flex-direction: column;\\n    align-items: start;\\n    justify-content: center;\\n    margin-bottom: 1rem;\\n    transition: transform 0.3s ease;\\n  }\\n\\n  .title {\\n    font-size: 2.5rem;\\n    color: #2c3e50;\\n    margin: 0;\\n    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\\n  }\\n\\n  .title-box:hover {\\n    transform: scale(1.05);\\n  }\\n\\n  .subtitle {\\n    font-size: 1.5rem;\\n    color: #0a0903;\\n    margin: 0;\\n  }\\n\\n  @keyframes pop {\\n    0% {\\n      transform: scale(1);\\n    }\\n    50% {\\n      transform: scale(1.1);\\n    }\\n    100% {\\n      transform: scale(1);\\n    }\\n  }\\n</style>\\n"],"names":[],"mappings":"AAuKE,wBAAW,CACT,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,UAAU,CAAE,KAAK,CACjB,WAAW,CAAE,IAAI,CACjB,cAAc,CAAE,IAElB,CAEA,wBAAW,CACT,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,WAAW,CAAE,KAAK,CAClB,eAAe,CAAE,MAAM,CACvB,aAAa,CAAE,IAAI,CACnB,UAAU,CAAE,SAAS,CAAC,IAAI,CAAC,IAC7B,CAEA,oBAAO,CACL,SAAS,CAAE,MAAM,CACjB,KAAK,CAAE,OAAO,CACd,MAAM,CAAE,CAAC,CACT,WAAW,CAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAC5C,CAEA,wBAAU,MAAO,CACf,SAAS,CAAE,MAAM,IAAI,CACvB,CAEA,uBAAU,CACR,SAAS,CAAE,MAAM,CACjB,KAAK,CAAE,OAAO,CACd,MAAM,CAAE,CACV,CAEA,WAAW,iBAAI,CACb,EAAG,CACD,SAAS,CAAE,MAAM,CAAC,CACpB,CACA,GAAI,CACF,SAAS,CAAE,MAAM,GAAG,CACtB,CACA,IAAK,CACH,SAAS,CAAE,MAAM,CAAC,CACpB,CACF"}'},Ee="/api/search",ye="/api/reviews",Ie=p((e,n,t,s)=>{let{title:o}=n,{subtitle:r}=n,i="",A="",l=1,a=[],d=[],c=!1;const h=()=>{i="",A="",l=1,a=[],d=[]},S=async()=>{if(c=!0,console.log(i),i===""){alert("請輸入搜尋關鍵字"),c=!1;return}try{const C=await fetch(Ee+`?storeName=${i}`);if(!C.ok){console.error("Error:",C.statusText),alert("無法取得搜尋結果");return}a=await C.json(),console.log(a)}catch(C){console.error(C),alert("無法取得搜尋結果")}finally{c=!1}},q=async()=>{if(c=!0,console.log(A),A===""){alert("請選擇店家"),c=!1;return}try{const C=await fetch(ye+`?storeID=${A.ID}&pages=${l}`);if(!C.ok){console.error("Error:",C.statusText),alert("無法取得評論");return}d=await C.json(),console.log(d)}catch(C){console.error(C),alert("無法取得評論")}finally{c=!1}},Z=C=>{const f=document.createElement("a");let w="";switch(C){case"csv":const F=new Uint8Array([239,187,191]),V=Object.keys(d[0]).join(","),Q=d.map($=>Object.values($).map(g=>typeof g=="string"&&(g.includes(",")||g.includes(`
`)||g.includes('"'))?`"${g.replace(/"/g,'""')}"`:g).join(",")),H=V+`
`+Q.join(`
`),X=new Blob([F,H],{type:"text/csv;charset=utf-8"});w=window.URL.createObjectURL(X),f.href=w,f.download=`${A.Name}.csv`,f.click();break;case"json":const Y=JSON.stringify(d,null,2),J=new Blob([Y],{type:"application/json;charset=utf-8"});w=window.URL.createObjectURL(J),f.href=w,f.download=`${A.Name}.json`,f.click();break}window.URL.revokeObjectURL(w)};n.title===void 0&&t.title&&o!==void 0&&t.title(o),n.subtitle===void 0&&t.subtitle&&r!==void 0&&t.subtitle(r),e.css.add(we);let v,G,P=e.head;do v=!0,e.head=P,G=`${e.head+=`<!-- HEAD_svelte-1kuv545_START -->${e.title=`<title>${u(o)} - 榛果繽紛樂</title>`,""}<!-- HEAD_svelte-1kuv545_END -->`,""} <div class="container svelte-fc3bky"><img src="https://src.hazelnut-paradise.com/GooMapReviewSnatcher.png" alt="GooMapReviewSnatcher" style="width: 100%; max-width: 150px;"> <div class="title-box svelte-fc3bky"><h1 class="title svelte-fc3bky">${u(o)}</h1> <h2 class="subtitle svelte-fc3bky">${u(r)}</h2></div> ${c?`${b(k,"Loader").$$render(e,{},{},{})}`:`${Object.keys(d).length==0?`${b(D,"InputCard").$$render(e,{handleSearch:S,handleGetReview:q,searchInputStr:i,selectedStore:A,storeData:a,pagesToFetch:l},{searchInputStr:C=>{i=C,v=!1},selectedStore:C=>{A=C,v=!1},storeData:C=>{a=C,v=!1},pagesToFetch:C=>{l=C,v=!1}},{})}`:`${b(N,"Result").$$render(e,{selectedStore:A,download:Z,handleReset:h,reviews:d},{reviews:C=>{d=C,v=!1}},{})}`}`} </div>`;while(!v);return G}),Be={code:"p.svelte-5zxcoy{white-space:pre-wrap}",map:'{"version":3,"file":"default-error.svelte","sources":["default-error.svelte"],"sourcesContent":["<script>\\n    /** @type {number} */\\n    export let status;\\n\\n    /** @type {string} */\\n    export let message;\\n<\/script>\\n\\n<h1>{status}</h1>\\n<p>{message}</p>\\n\\n<style>\\n    p {\\n        white-space: pre-wrap;\\n    }\\n</style>\\n"],"names":[],"mappings":"AAYI,eAAE,CACE,WAAW,CAAE,QACjB"}'},Se=p((e,n,t,s)=>{let{status:o}=n,{message:r}=n;return n.status===void 0&&t.status&&o!==void 0&&t.status(o),n.message===void 0&&t.message&&r!==void 0&&t.message(r),e.css.add(Be),`<h1>${u(o)}</h1> <p class="svelte-5zxcoy">${u(r)}</p>`}),Me=pe,Oe="/golte_/entries/hydrate-Bv6hQqc0.js",K={"components/InfoCard":{server:_,Client:"/golte_/entries/InfoCard-l3ckkPzU.js",CSS:["/golte_/assets/InfoCard-zmWsCgFL.css"]},"components/InputCard":{server:D,Client:"/golte_/entries/InputCard-BxUagq9k.js",CSS:["/golte_/assets/InputCard-CGlak8uv.css","/golte_/assets/InfoCard-zmWsCgFL.css"]},"components/Loader":{server:k,Client:"/golte_/entries/Loader-CT3sUNCL.js",CSS:["/golte_/assets/Loader-BbdzO3D6.css"]},"components/OneAd":{server:T,Client:"/golte_/entries/OneAd-DLrgNz36.js",CSS:[]},"components/Redirecting":{server:fe,Client:"/golte_/entries/Redirecting-DECyv3Gs.js",CSS:["/golte_/assets/Loader-BbdzO3D6.css"]},"components/Result":{server:N,Client:"/golte_/entries/Result-Bl5QZC67.js",CSS:["/golte_/assets/Result-BIHVEwrA.css","/golte_/assets/Loader-BbdzO3D6.css"]},"layouts/Layout":{server:xe,Client:"/golte_/entries/Layout-D4dfSEvq.js",CSS:["/golte_/assets/Layout-BX7EiMRL.css"]},"pages/App":{server:Ie,Client:"/golte_/entries/App-BmGBbZ76.js",CSS:["/golte_/assets/App-C5gkbtwu.css","/golte_/assets/InputCard-CGlak8uv.css","/golte_/assets/InfoCard-zmWsCgFL.css","/golte_/assets/Loader-BbdzO3D6.css","/golte_/assets/Result-BIHVEwrA.css"]},$$$GOLTE_DEFAULT_ERROR$$$:{server:Se,Client:"/golte_/entries/default-error-BG9NszCF.js",CSS:["/golte_/assets/default-error-jCKc6TVQ.css"]}};function Ke(e,n,t){const s=[],o=[],r=new Set,i=K[t];if(!i)throw new Error(`"${t}" is not a component`);for(const c of e){const h=K[c.Comp];if(!h)throw new Error(`"${c.Comp}" is not a component`);s.push({comp:h.server,props:c.Props,errPage:i.server}),o.push({comp:`${h.Client}`,props:c.Props,errPage:`${i.Client}`});for(const S of h.CSS)r.add(S)}for(const c of i.CSS)r.add(c);let A;const l=new Map;l.set(L,c=>A=c);let{html:a,head:d}=Me.render({nodes:s,contextData:n},{context:l});for(const c of r)d+=`
<link href="${c}" rel="stylesheet">`;return A&&(o[A.index].ssrError=A.props),a+=`
        <script>
            (async function () {
                const target = document.currentScript.parentElement;
                const { hydrate } = await import("${Oe}");
                await hydrate(target, ${z(o)}, ${z(n)});
            })();
        <\/script>
    `,{Head:d,Body:a,HasError:!!A}}function z(e){return JSON.stringify(e).replace("<\/script>","<\\/script>")}exports.Manifest=K;exports.Render=Ke;
