"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const Q="[",J="]",Z=/[&"<]/g,$=/[&<]/g;function d(e,t){const n=String(e??""),s=t?Z:$;s.lastIndex=0;let r="",l=0;for(;s.test(n);){const u=s.lastIndex-1,o=n[u];r+=n.substring(l,u)+(o==="&"?"&amp;":o==='"'?"&quot;":"&lt;"),l=u+1}return r+n.substring(l)}const k={translate:new Map([[!0,"yes"],[!1,"no"]])};function B(e,t,n=!1){if(t==null||!t&&n||t===""&&e==="class")return"";const s=e in k&&k[e].get(t)||t,r=n?"":`="${d(s,!0)}"`;return` ${e}${r}`}const x=()=>{};function ee(e,t,n=!1){return e===void 0?n?t():t:e}function te(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function ne(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let T=!1;function se(e){var t=T;try{return T=!0,e()}finally{T=t}}const w=[];function y(e,t=x){let n=null;const s=new Set;function r(o){if(te(e,o)&&(e=o,n)){const f=!w.length;for(const i of s)i[1](),w.push(i,e);if(f){for(let i=0;i<w.length;i+=2)w[i][0](w[i+1]);w.length=0}}}function l(o){r(o(e))}function u(o,f=x){const i=[o,f];return s.add(i),s.size===1&&(n=t(r,l)||x),o(e),()=>{s.delete(i),s.size===0&&n&&(n(),n=null)}}return{set:r,update:l,subscribe:u}}function re(e,t,n){if(e==null)return t(void 0),x;const s=se(()=>e.subscribe(t,n));return s.unsubscribe?()=>s.unsubscribe():s}var g=null;function oe(e){return le().get(e)}function le(e){return g===null&&ne(),g.c??(g.c=new Map(ce(g)||void 0))}function N(e){g={p:g,c:null,d:null}}function F(){var e=g,t=e.d;t&&de.push(...t),g=e.p}function ce(e){let t=e.p;for(;t!==null;){const n=t.c;if(n!==null)return n;t=t.p}return null}const ue=`<!--${Q}-->`,ie=`<!--${J}-->`;function ae({out:e,css:t,head:n}){return{out:e,css:new Set(t),head:{title:n.title,out:n.out}}}function fe(e,t){e.out=t.out,e.head=t.head}let de=[];function he(e,t){const n=e.head;n.out+=ue,t(n),n.out+=ie}function ve(e){const t={};let n;for(let s=0;s<e.length;s++){const r=e[s];for(n in r){const l=Object.getOwnPropertyDescriptor(r,n);l?Object.defineProperty(t,n,l):t[n]=r[n]}}return t}function D(e,t,n){var r;if(t in e&&e[t][0]===n)return e[t][2];(r=e[t])==null||r[1](),e[t]=[n,null,void 0];const s=re(n,l=>e[t][2]=l);return e[t][1]=s,e[t][2]}function M(e){for(const t in e)e[t][1]()}function C(e,t){var n;for(const s in t){const r=e[s],l=t[s];r===void 0&&l!==void 0&&((n=Object.getOwnPropertyDescriptor(e,s))!=null&&n.set)&&(e[s]=l)}}function S(e){return e?e.length!==void 0?e:Array.from(e):[]}function ge(e,t){var o;var n;let s=t.node,r=t.index;const{next:l,content:u}=s;e.out+="<!---->",(o=u.comp)==null||o.call(u,e,ve([u.props,{children:f=>{f.out+="<!---->",D(n??(n={}),"$next",l)?(f.out+="<!--[-->",V(f,{node:D(n??(n={}),"$next",l),index:r+1})):f.out+="<!--[!-->",f.out+="<!--]-->",f.out+="<!---->"},$$slots:{default:!0}}])),e.out+="<!---->",n&&M(n),C(t,{node:s,index:r})}const U=Symbol(),G=ge,be={...G,$$render:(e,t,n,s,r)=>{try{return G.$$render(e,t,n,s,r)}catch{const o={status:500,message:"Internal Error"};return oe(U)({index:t.index,props:o}),t.node.content.errPage.$$render(e,o,n,s,r)}}},V=be;function pe(e){let t=y(null);for(let n=e.length-1;n>=0;n--)t=y({content:e[n],next:t});return t}let _;function we(e,t){_={},_.url=y(new URL(e)),_.node=pe(t)}function me(e,t){N();var n;let s=t.nodes,r=t.contextData;we(r.URL,s);const{node:l}=_;e.out+="<!---->",D(n??(n={}),"$node",l)?(e.out+="<!--[-->",V(e,{node:D(n??(n={}),"$node",l),index:0})):e.out+="<!--[!-->",e.out+="<!--]-->",e.out+="<!---->",n&&M(n),C(t,{nodes:s,contextData:r}),F()}function X(e){e.out+='<div class="info-card svelte-1ekwafl"><strong>估咩評論小扒手</strong> 幫你輕鬆爬取 Google Maps 商家評論，<br> 輸入店名立即開始吧！</div>'}function q(e,t){N();let n=t.searchInputStr,s=t.selectedStore,r=t.pagesToFetch,l=t.handleSearch,u=t.handleGetReview,o=ee(t.storeData,()=>[],!0);if(Object.keys(o).length!==0){e.out+="<!--[-->";const f=S(o);e.out+='<form class="input-form chose-store svelte-e5nmlf"><div class="store-select-box svelte-e5nmlf"><label for="store" class="svelte-e5nmlf">選擇店家</label> <select class="store-select svelte-e5nmlf"><!--[-->';for(let i=0,h=f.length;i<h;i++){let a=f[i];e.out+=`<option${B("value",a)}>${d(a.Name)}</option>`}e.out+=`<!--]--></select></div> <div class="pages-box svelte-e5nmlf"><label for="pages" class="svelte-e5nmlf">輸入頁數，0代表全部</label> <input type="number" name="pages" placeholder="輸入頁數"${B("value",r)} class="svelte-e5nmlf"></div> <button type="submit" class="button svelte-e5nmlf">確定</button></form>`}else e.out+="<!--[!-->",X(e),e.out+=`<!----> <form class="input-form svelte-e5nmlf"><input type="text" placeholder="輸入關鍵字"${B("value",n)} class="svelte-e5nmlf"> <button type="submit" class="button svelte-e5nmlf">搜尋</button></form>`;e.out+="<!--]-->",C(t,{searchInputStr:n,selectedStore:s,pagesToFetch:r,handleSearch:l,handleGetReview:u,storeData:o}),F()}function H(e){const t=["loading","loading.","loading..","loading..."];let n=t[0],s=1;setInterval(()=>{n=t[s],s=(s+1)%t.length},500),e.out+=`<div class="loader-container svelte-nx5s04"><p class="svelte-nx5s04">${d(n)}</p> <div class="loader svelte-nx5s04"></div></div>`}function Ce(e,t){N();let n=t.title,s=t.subtitle;const r="/api/search",l="/api/reviews";let u="",o="",f=1,i=[],h=[],a=!1;const p=async()=>{if(a=!0,console.log(u),u===""){alert("請輸入搜尋關鍵字"),a=!1;return}try{const c=await fetch(r+`?storeName=${u}`);if(!c.ok){console.error("Error:",c.statusText),alert("無法取得搜尋結果");return}i=await c.json(),console.log(i)}catch(c){console.error(c),alert("無法取得搜尋結果")}finally{a=!1}},I=async()=>{if(a=!0,console.log(o),o===""){alert("請選擇店家"),a=!1;return}try{const c=await fetch(l+`?storeID=${o.ID}&pages=${f}`);if(!c.ok){console.error("Error:",c.statusText),alert("無法取得評論");return}h=await c.json(),console.log(h)}catch(c){console.error(c),alert("無法取得評論")}finally{a=!1}};let m=!0,O;function K(c){if(he(c,v=>{v.title=`<title>${d(n)} - 榛果繽紛樂</title>`}),c.out+=`<div id="navbar-placeholder" class="svelte-12wvi4t"></div> <div class="container svelte-12wvi4t"><img src="https://src.hazelnut-paradise.com/GooMapReviewSnatcher.png" alt="GooMapReviewSnatcher" style="width: 100%; max-width: 150px;" class="svelte-12wvi4t"> <div class="title-box svelte-12wvi4t"><h1 class="title svelte-12wvi4t">${d(n)}</h1> <h2 class="subtitle svelte-12wvi4t">${d(s)}</h2></div> `,a)c.out+="<!--[-->",H(c);else{if(c.out+="<!--[!-->",Object.keys(h).length==0)c.out+="<!--[-->",q(c,{handleSearch:p,handleGetReview:I,storeData:i,get pagesToFetch(){return f},set pagesToFetch(v){f=v,m=!1},get searchInputStr(){return u},set searchInputStr(v){u=v,m=!1},get selectedStore(){return o},set selectedStore(v){o=v,m=!1}});else{c.out+="<!--[!-->";const v=S(Object.keys(h[0])),L=S(h);c.out+=`<button class="reset-button button svelte-12wvi4t">查詢其他商家</button> <div class="review-box svelte-12wvi4t"><h3 class="store-name svelte-12wvi4t">${d(o.Name)}</h3> <button class="download-button button svelte-12wvi4t">下載 CSV</button> <button class="download-button button svelte-12wvi4t">下載 JSON</button> <div class="review-table-box svelte-12wvi4t"><table class="review-table svelte-12wvi4t"><thead class="svelte-12wvi4t"><tr class="svelte-12wvi4t"><!--[-->`;for(let b=0,E=v.length;b<E;b++){let R=v[b];c.out+=`<th class="svelte-12wvi4t">${d(R)}</th>`}c.out+='<!--]--></tr></thead><tbody class="svelte-12wvi4t"><!--[-->';for(let b=0,E=L.length;b<E;b++){let R=L[b];const P=S(Object.values(R));c.out+='<tr class="svelte-12wvi4t"><!--[-->';for(let j=0,W=P.length;j<W;j++){let Y=P[j];c.out+=`<td class="svelte-12wvi4t">${d(Y)}</td>`}c.out+="<!--]--></tr>"}c.out+="<!--]--></tbody></table></div></div>"}c.out+="<!--]-->"}c.out+='<!--]--></div> <footer class="svelte-12wvi4t">2025 - 榛果繽紛樂</footer>'}do m=!0,O=ae(e),K(O);while(!m);fe(e,O),C(t,{title:n,subtitle:s}),F()}function xe(e,t){let n=t.status,s=t.message;e.out+=`<h1>${d(n)}</h1> <p class="svelte-5zxcoy">${d(s)}</p>`,C(t,{status:n,message:s})}const Se=me,_e="/golte_/entries/hydrate-B7QQ0sLc.js",A={"components/InfoCard":{server:X,Client:"/golte_/entries/InfoCard-Enpj5mUS.js",CSS:["/golte_/assets/InfoCard-BXxVxhrr.css"]},"components/InputCard":{server:q,Client:"/golte_/entries/InputCard-CcAx-mXG.js",CSS:["/golte_/assets/InputCard-Bp3zFdIY.css","/golte_/assets/InfoCard-BXxVxhrr.css"]},"components/Loader":{server:H,Client:"/golte_/entries/Loader-CFgeOWCn.js",CSS:["/golte_/assets/Loader-BbdzO3D6.css"]},"pages/App":{server:Ce,Client:"/golte_/entries/App-DPdKhNwm.js",CSS:["/golte_/assets/App-DhfV6BpC.css","/golte_/assets/InputCard-Bp3zFdIY.css","/golte_/assets/InfoCard-BXxVxhrr.css","/golte_/assets/Loader-BbdzO3D6.css"]},$$$GOLTE_DEFAULT_ERROR$$$:{server:xe,Client:"/golte_/entries/default-error-RbP_9ccR.js",CSS:["/golte_/assets/default-error-jCKc6TVQ.css"]}};function De(e,t,n){const s=[],r=[],l=new Set,u=A[n];if(!u)throw new Error(`"${n}" is not a component`);for(const a of e){const p=A[a.Comp];if(!p)throw new Error(`"${a.Comp}" is not a component`);s.push({comp:p.server,props:a.Props,errPage:u.server}),r.push({comp:`${p.Client}`,props:a.Props,errPage:`${u.Client}`});for(const I of p.CSS)l.add(I)}for(const a of u.CSS)l.add(a);let o;const f=new Map;f.set(U,a=>o=a);let{html:i,head:h}=Se.render({nodes:s,contextData:t},{context:f});for(const a of l)h+=`
<link href="${a}" rel="stylesheet">`;return o&&(r[o.index].ssrError=o.props),i+=`
        <script>
            (async function () {
                const target = document.currentScript.parentElement;
                const { hydrate } = await import("${_e}");
                await hydrate(target, ${z(r)}, ${z(t)});
            })();
        <\/script>
    `,{Head:h,Body:i,HasError:!!o}}function z(e){return JSON.stringify(e).replace("<\/script>","<\\/script>")}exports.Manifest=A;exports.Render=De;
